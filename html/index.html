<!doctype html>
<html>
<head>

</head>
<body>
<script src="config.md.js" charset="UTF-8"></script>
<script src="map.md.js" charset="UTF-8"></script>
<script src="options.md.js" charset="UTF-8"></script>
<script src="examples.md.js" charset="UTF-8"></script>
<script>
  var queuedAction = '';
  function getGameConfig() { return GAME_CONFIG; }
  function getGameMap() { return document.getElementById('game_map').value /*GAME_MAP*/; }
  function getGameOptions() { return document.getElementById('game_options').value /*GAME_OPTIONS*/; }
  function getExamples() { return GAME_EXAMPLES; }
  function getAction() { let x = queuedAction; queuedAction = ''; return x; }
</script>
<script type="module">
  Error.stackTraceLimit = Infinity;
  console.log('(html) start');
  import('../pkg/factini.js').then(x => {
    console.log('(html) loaded, starting Factini now');
    x.default();
  }, (e) => console.error(e));
  console.log('(html) after import');
</script>

<style>#tdb img { border: 1px solid green; }</style>
<div id="tdb" style="float: right; border: 1px solid black; white-space: pre; font-family: monospace;">the debug box</div>

<textarea id="game_options" style="float: right; clear: right; min-width: 50px; min-height: 50px; width: 300px; height: 600px; margin-top: 5px; margin-right: 5px;" autocomplete="off" spellcheck="false"></textarea>
<script>document.getElementById('game_options').value = GAME_OPTIONS.trim();</script>
<button style="float: right; clear: right; margin-top: 5px; margin-right: 5px;" onClick="queuedAction = 'apply_options';">Apply options</button>

<textarea id="game_map" style="float: right; clear: right; min-width: 50px; min-height: 50px; width: 400px; height: 100px; margin-top: 5px; margin-right: 5px;" autocomplete="off" spellcheck="false" onClick="this.select();"></textarea>
<script>document.getElementById('game_map').value = GAME_MAP.trim();</script>
<button style="float: right; clear: right; margin-top: 5px; margin-right: 5px;" onClick="queuedAction = 'load_map';">Load map</button>

</body>
</html>
